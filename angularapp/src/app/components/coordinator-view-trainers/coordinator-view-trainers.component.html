<div class="container">
  <h2 class="mb-3" style="text-align: center; font-size: x-large; padding: 10px;">Trainers </h2>

  <div class="row mb-3">
    <div class="col-md-6">
      <label class="form-label">Search by:</label>
      <input type="text" class="form-control" placeholder="Trainer Name.." [(ngModel)]="trainerName" />
    </div>
    <div class="col-md-6">
      <label class="form-label">Filter by Status:</label>
      <select class="form-select" [(ngModel)]="statusFilter">
        <option value="">All Status</option>
        <option value="Active">Active</option>
        <option value="Inactive">Inactive</option>
      </select>
    </div>
  </div>

  <div class="table-responsive">
    <table class="table table-bordered table-striped text-center align-middle">
      <thead class="table-primary">
        <tr>
          <th>S.NO</th>
          <th>NAME</th>
          <th>EMAIL</th>
          <th>PHONE</th>
          <th>EXPERTISE</th>
          <th>STATUS</th>
          <th>ACTION</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let trainer of trainers | searchByName:trainerName | filterByStatus:statusFilter; let i = index">
          <td>{{ trainer_index+i }}</td>
          <td>{{ trainer.name }}</td>
          <td>{{ trainer.email }}</td>
          <td>{{ trainer.phone }}</td>
          <td>{{ trainer.expertise }}</td>
          <td>
            <span
              class="badge rounded-pill bg-success px-3 py-2 fs-6 fw-semibold"
              *ngIf="trainer.status === 'Active'"
            >
              Active
            </span>
            <span
              class="badge rounded-pill bg-secondary px-3 py-2 fs-6 fw-semibold"
              *ngIf="trainer.status === 'Inactive'"
            >
              Inactive
            </span>
          </td>
          <td>
            <div class="d-flex flex-wrap gap-1 justify-content-center">
              <button class="btn btn-sm btn-success" (click)="editTrainer(trainer)">Edit</button>
              <button class="btn btn-sm btn-danger" (click)="deleteTrainer(trainer)">Delete</button>
              <!-- ToggleStatus -->
              <!-- <button class="btn btn-sm btn-danger" (click)="toggleStatus(trainer)">
                {{ trainer.status === 'Active' ? 'Make Inactive' : 'Make Active' }}
              </button> -->
              <button class="btn btn-sm btn-primary" (click)="viewResume(trainer)">View Resume</button>
            </div>
          </td>
        </tr>
        <tr *ngIf="(trainers | searchByName:trainerName | filterByStatus:statusFilter).length === 0">
          <td colspan="7" class="text-muted">Oops! No records found</td>
        </tr>
      </tbody>
    </table>
     <mat-paginator [length]="totalElements" [pageSize]="pageSize" [pageSizeOptions]="[10,20,50]" (page)="onPageChange($event)" ></mat-paginator>
  </div>
</div>

<div class="modal fade show" tabindex="-1" [ngClass]="{ 'd-block': showResumeModal }" aria-modal="true" role="dialog">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Resume Preview</h5>
        <button type="button" class="btn-close" (click)="closeResumeModal()"></button>
      </div>
      <div class="modal-body">
        <iframe *ngIf="resumeUrl" [src]="resumeUrl" width="100%" height="500px"></iframe>
      </div>
    </div>
  </div>
</div>
